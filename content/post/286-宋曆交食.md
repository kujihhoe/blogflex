---
author: ["柯棋瀚"]
title: "宋曆步交會"
date: 2021-05-26
categories: ["曆"]
url: /post/song-eclipse
description: '梳理一下宋代曆法的交食計算。相關論文也有，但是看得不明不白，只好自己根據宋志原文重新理一遍。'
img: ''
draft: true
---

爲節省篇幅，「入交」表示加時入交日及餘分（或餘秒）。日月改正包含以距離爲單位的先後積和以時間爲單位的朏朒積，我統一稱爲日月改正，讀者需加以區分（凡言積度，則爲先後積；凡言入交，則爲朏朒積）。需要注意各名詞的細微區別，可能一字之差就完全不同。`月改正(定朔入轉)` 表示以定朔入轉爲自變量的月改正。「朔」指「朔望」。比例指交率/交數≒0.078507

南宋各曆全同紀元。

近交初為交初，在二十六日、二十七日為交初；近交中為交中，在十三日、十四日為交中。

## 一、預備算法

1、經朔入交

2、經朔夜半入交：去掉小餘即可。

3、定朔夜半入交：整數日有進退的，加減一日，否則因經為定。

4、【紀元】定朔入交泛日=經朔入交±日改正±月改正

5、【紀元】定朔入交積度=定朔入交泛日*月平行速

6、【紀元】定朔入交定積度=定朔月行入交積度±月改正(定朔入轉)。定朔入轉不確定，估計是一樣的整數加減一日，否則因經為定。以定朔入交定積度判斷入陰陽曆。

## 二、

朔入交常日=經朔入交±日改正（應天叫朔交初度分，乾元叫朔交分）

【乾元儀天】朔入交定日=朔入交常日±比例×月改正（應天，乾元叫度定分）

判斷入陰陽曆根據：

【應天】朔入交常日±月改正（實際上應該是紀元的定朔入交泛日）

【乾元儀天】朔入交定日

【紀元】朔入交常日

入交定日=經朔入交±氣差±刻差±k0